generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model WaitlistApplication {
  id          String   @id @default(cuid())
  email       String   @unique
  firstName   String
  lastName    String
  linkedIn    String?
  dealSize    String?
  icp         String?
  createdAt   DateTime @default(now())
  status      String   @default("PENDING") 
  rating      Float    @default(5.0)
  reviewCount Int      @default(0)
}

model Opportunity {
  id        String   @id @default(cuid())
  userEmail String
  userName  String
  company   String
  role      String
  ask       String
  createdAt DateTime @default(now())
}

model Trade {
  id                  String   @id @default(cuid())
  opportunityId       String
  company             String
  requesterEmail      String
  offererEmail        String
  offererName         String
  contactLinkedIn     String   
  relationshipContext String   
  status              String   @default("PENDING") 
  createdAt           DateTime @default(now())
}

model User {
  id          String       @id @default(cuid())
  email       String       @unique
  firstName   String?
  connections Connection[] 
  createdAt   DateTime     @default(now())
}

model Connection {
  id           String   @id @default(cuid())
  userId       String
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  personName   String?  
  personTitle  String   // e.g., "VP of Engineering"
  companyName  String   // e.g., "Stripe"
  industry     String   // e.g., "Fintech"
  context      String   // e.g., "Former colleague"
  strength     Int      @default(3) // 1-5 scale
  
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  @@index([userId])
}